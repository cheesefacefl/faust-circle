<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Slot Machine</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    body { display:flex; min-height:100svh; margin:0; background:#111; color:#eee; align-items:center; justify-content:center; }
    .wrap { width:min(520px, 92vw); background:#1b1b1b; border:1px solid #2a2a2a; border-radius:14px; padding:20px; box-shadow:0 10px 40px rgba(0,0,0,.35); }
    h1 { margin:0 0 10px; font-size:1.15rem; color:#b6f; letter-spacing:.3px; }
    .reels { display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; margin:14px 0 12px; }
    .cell { background:#0d0d0d; border:1px solid #333; border-radius:10px; height:110px; display:grid; place-items:center; font-size:54px; transition:transform .2s ease; }
    .cell.spin { animation:spin .8s ease-in-out; }
    @keyframes spin {
      0% { transform:translateY(0) rotate(0); }
      35% { transform:translateY(-12px) rotate(6deg); }
      70% { transform:translateY(4px) rotate(-4deg); }
      100% { transform:translateY(0) rotate(0); }
    }
    .panel { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .panel .left { display:flex; gap:10px; align-items:center; }
    .btn { appearance:none; border:0; background:#7c4dff; color:#fff; padding:10px 16px; border-radius:10px; font-weight:700; cursor:pointer; }
    .btn:disabled { opacity:.5; cursor:not-allowed; }
    .muted { color:#aaa; font-size:.9rem; }
    .msg { min-height:1.2em; margin-top:8px; color:#9efc; }
    .stats { display:flex; gap:16px; flex-wrap:wrap; font-size:.95rem; }
    .stat { background:#121212; border:1px solid #2a2a2a; padding:8px 10px; border-radius:8px; }
    details { margin-top:12px; }
    table { width:100%; border-collapse:collapse; font-size:.95rem; }
    td, th { border-bottom:1px solid #2a2a2a; padding:8px; text-align:left; }
    .green { color:#6eea8d; }
    .pink { color:#ff8ad6; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üçí Mini Slot Machine</h1>

    <div class="reels" id="reels">
      <div class="cell" id="r0">üçí</div>
      <div class="cell" id="r1">üçã</div>
      <div class="cell" id="r2">üîî</div>
    </div>

    <div class="panel">
      <div class="left">
        <button class="btn" id="spinBtn">SPIN (‚àí$1)</button>
        <button class="btn" id="addBtn" title="Add $20 credits">+ $20</button>
      </div>
      <div class="stats">
        <div class="stat">Credits: <strong id="credits">$100</strong></div>
        <div class="stat">Bet: <strong id="bet">$1</strong></div>
      </div>
    </div>

    <div class="msg" id="msg"></div>

    <details>
      <summary class="muted">Payout table</summary>
      <table>
        <thead><tr><th>Combo</th><th>Payout</th></tr></thead>
        <tbody>
          <tr><td>3√ó üíé</td><td class="green">√ó20</td></tr>
          <tr><td>3√ó üîî</td><td class="green">√ó10</td></tr>
          <tr><td>3√ó üçÄ</td><td class="green">√ó6</td></tr>
          <tr><td>3√ó üçí / üçã / üçá</td><td class="green">√ó4</td></tr>
          <tr><td>Any 2 of a kind</td><td class="green">√ó2</td></tr>
        </tbody>
      </table>
    </details>

    <p class="muted">Tip: edit symbols/payouts in the code to theme it (Zelda, Diablo, plants, spiders‚Äîgo wild).</p>
  </div>

  <script>
    // Symbols and rarity (weights)
    const SYMBOLS = [
      { ch: "üçí", w: 5 },
      { ch: "üçã", w: 5 },
      { ch: "üçá", w: 5 },
      { ch: "üçÄ", w: 3 },
      { ch: "üîî", w: 2 },
      { ch: "üíé", w: 1 },
    ];

    // Payouts for triples; pairs pay 2x by default.
    const PAY_TRIPLE = { "üíé": 20, "üîî": 10, "üçÄ": 6, "üçí": 4, "üçã": 4, "üçá": 4 };
    const START_CREDITS = 100;
    const BET = 1;

    const creditsEl = document.getElementById("credits");
    const betEl = document.getElementById("bet");
    const msgEl = document.getElementById("msg");
    const spinBtn = document.getElementById("spinBtn");
    const addBtn = document.getElementById("addBtn");
    const reelEls = [0, 1, 2].map((i) => document.getElementById(`r${i}`));

    let credits = START_CREDITS;
    betEl.textContent = `$${BET}`;
    updateCredits();

    addBtn.addEventListener("click", () => {
      credits += 20;
      updateCredits();
      msg("Added $20.");
      spinBtn.disabled = false;
    });

    spinBtn.addEventListener("click", async () => {
      if (credits < BET) return;
      credits -= BET;
      updateCredits();
      spinBtn.disabled = true;
      msg("Spinning‚Ä¶");

      const result = spinOnce();
      await animateReels(result);

      const payout = evaluate(result);
      if (payout > 0) {
        const win = payout * BET;
        credits += win;
        updateCredits();
        msg(`You won $${win} (${payout}√ó)!`, "win");
      } else {
        msg("No win. Try again!");
      }
      if (credits < BET) {
        msg("You‚Äôre out of credits. Hit +$20 to keep playing.");
      } else {
        spinBtn.disabled = false;
      }
    });

    function updateCredits() {
      creditsEl.textContent = `$${credits}`;
    }

    function weightedPick() {
      const total = SYMBOLS.reduce((sum, symbol) => sum + symbol.w, 0);
      let r = Math.random() * total;
      for (const symbol of SYMBOLS) {
        r -= symbol.w;
        if (r <= 0) return symbol.ch;
      }
      return SYMBOLS[0].ch;
    }

    function spinOnce() {
      return [weightedPick(), weightedPick(), weightedPick()];
    }

    function evaluate([a, b, c]) {
      if (a === b && b === c) return PAY_TRIPLE[a] ?? 4; // default 4√ó
      if (a === b || a === c || b === c) return 2; // any pair
      return 0;
    }

    async function animateReels(result) {
      // quick bounce
      reelEls.forEach((el) => el.classList.add("spin"));
      await sleep(250);
      // staggered stop
      for (let i = 0; i < 3; i++) {
        reelEls[i].textContent = result[i];
        await sleep(250);
      }
      reelEls.forEach((el) => el.classList.remove("spin"));
    }

    const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

    function msg(text, kind = "info") {
      msgEl.textContent = text;
      msgEl.className = kind === "win" ? "msg green" : "msg";
    }
  </script>
</body>
</html>
